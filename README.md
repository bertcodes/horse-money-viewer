# 马钱行情

一个简洁实用的股票行情查看工具，支持 A股、港股、美股实时行情。

## 功能特性

### 核心功能
- **实时行情**: 支持 A股、港股、美股实时行情数据
- **成本管理**: 记录股票成本价和持仓数量，自动计算收益率和收益
- **目标止损**: 设置目标价和止损价，实时显示价格状态
- **盈亏比**: 自动计算风险收益比，辅助投资决策
- **图表展示**: 支持分时图、日K线、周K线、月K线
- **自动刷新**: 可配置的自动刷新功能（3-300秒）
- **价格提醒**: 达到目标价或止损价时自动提醒

### 数据管理
- **云端同步**: 基于 GitHub Gist 的数据备份与多设备同步
  - 支持自动同步，数据变化时自动备份
  - 支持手动备份和恢复
  - 可手动设置 Gist ID 实现多设备间数据同步
  - GitHub Token 可视显示，方便复制和迁移
- **数据持久化**: 使用 localStorage 本地存储
- **导入导出**: 支持 JSON 格式配置文件的导入和导出

### 用户界面
- **隐蔽模式**: 快速切换隐蔽模式，保护隐私（老板键）
- **列自定义**: 可自定义显示/隐藏表格列
- **排序功能**: 支持按任意列排序（升序/降序）
- **搜索过滤**: 
  - 支持按股票名称或代码搜索
  - 支持快速筛选（盈利/亏损/已达目标）
  - 输入时实时显示搜索建议（支持代码、名称、拼音匹配）
- **语音播报**: 支持选择特定股票进行语音播报，可配置播报间隔
  - 自动识别股市交易时间，仅在开盘时播报
- **响应式设计**: 完美支持移动端访问
- **智能预测**: 基于涨跌幅和价格位置进行趋势预测

## 使用方法

### 添加股票

在输入框中输入股票代码或名称，支持以下格式：
- A股: `sh600519`, `sz000001`，或直接输入股票名称如 `贵州茅台`
- 港股: `hk00700`，或输入 `腾讯控股`
- 美股: `usAAPL`，或输入 `苹果`

也可以一次性输入成本价和持仓数量，格式为：`代码,成本价,持仓数量`
例如：`sh600519,1000,100`

输入时会实时显示搜索建议，支持代码、名称、拼音匹配。建议从下拉列表中选择股票以确保代码准确。

### 编辑股票

点击表格中的成本价、持仓、目标价或止损价单元格，即可弹出编辑窗口进行修改。

### 查看图表

- 双击股票行打开图表窗口
- 右键点击股票行选择图表类型
- 支持分时图、日K线、周K线、月K线

### 云端同步

1. 点击"云端同步"按钮打开设置窗口
2. 点击"获取 GitHub Token"前往 GitHub 生成 Personal Access Token（需勾选 gist 权限）
3. 将 Token 粘贴到输入框并保存
4. 可选择开启自动同步
5. 手动点击"立即备份"或"恢复数据"进行同步操作
6. 多设备同步时，手动设置 Gist ID 保持一致即可

### 语音播报

1. 点击"语音播报"按钮打开设置窗口
2. 勾选"开启语音播报"
3. 在股票列表中选择要播报的股票
4. 设置播报间隔（默认3秒）
5. 点击"测试播报"预览效果

### 快捷键

- `Ctrl + H`: 切换隐蔽模式（老板键）
- `Ctrl + R`: 刷新数据
- `ESC`: 关闭弹窗
- `Enter`: 在编辑窗口中保存，或确认添加股票

### 快速筛选

使用快速筛选功能可以快速查看特定状态的股票：
- **全部**: 显示所有股票
- **盈利**: 只显示有持仓且收益率为正的股票
- **亏损**: 只显示有持仓且收益率为负的股票
- **已达目标**: 只显示当前价已达到目标价的股票

### 隐蔽模式

点击"隐蔽"按钮或按 `Ctrl + H` 进入隐蔽模式，页面将切换为低调的灰色调，涨跌颜色统一显示为灰色，窗口标题也会伪装成工作文档，保护隐私。

## 数据来源

本项目使用以下免费 API 获取数据：

| 数据类型 | API 地址 |
|---------|----------|
| 股票行情 | 腾讯财经 API |
| 股票图表 | 新浪财经 API |
| 股票搜索 | 新浪财经 API |

## 技术栈

- 纯 HTML/CSS/JavaScript，无任何框架依赖
- 使用 localStorage 存储数据
- 使用腾讯财经 API 获取实时数据
- 使用 GitHub Gist API 实现云端同步
- 使用浏览器 Web Speech API 实现语音播报

## 浏览器支持

- Chrome/Edge (推荐)
- Firefox
- Safari
- 其他现代浏览器

## 注意事项

- 数据来源于第三方 API，可能存在延迟
- 指数不支持图表显示
- 停牌股票可能无法获取最新数据
- 建议在非工作时间使用，以免影响工作
- 云端同步依赖 GitHub API，请确保网络连接正常
- GitHub Token 具有完整权限，请妥善保管，勿泄露给他人
- 语音播报功能需要浏览器支持 Web Speech API
- 股票搜索建议依赖网络，如搜索失败会使用本地备用数据库

## 部署

### GitHub Pages 部署

此项目已适配 GitHub Pages，可直接部署：

1. 将项目推送到 GitHub 仓库
2. 在仓库设置中启用 GitHub Pages
3. 选择 main 分支作为源
4. 访问生成的 URL 即可使用

### 本地使用

直接用浏览器打开 `index.html` 文件即可使用，无需任何服务器配置。

### CloudStudio 部署

1. 点击 CloudStudio 集成按钮
2. 按照提示完成部署
3. 获取访问链接

## 项目结构

```
leeks-master/
├── index.html              # 主程序文件
├── README.md              # 项目说明文档
├── horse-money-viewer.html  # 备用页面
├── study-plan.html        # 学习计划（备用）
├── build.gradle           # Gradle构建文件
├── settings.gradle        # Gradle设置文件
├── gradlew               # Gradle包装器（Unix）
├── gradlew.bat           # Gradle包装器（Windows）
├── img1.png              # 项目截图
├── img2.png              # 项目截图
├── gradle/               # Gradle依赖
│   └── wrapper/
│       └── gradle-wrapper.jar
└── src/                  # Java源码目录
```

## 开源协议

MIT License

## 更新日志

### v2.0
- 新增云端同步功能，支持 GitHub Gist 备份和多设备同步
- 新增语音播报功能，支持选择股票进行定时播报
- 新增股票搜索建议，支持代码、名称、拼音匹配
- 新增快速筛选功能（盈利/亏损/已达目标）
- 优化移动端适配
- 优化隐蔽模式显示效果
- 新增价格提醒功能

### v1.0
- 初始版本发布
- 支持 A股、港股、美股实时行情
- 支持成本价、目标价、止损价管理
- 支持图表展示
- 支持隐蔽模式
